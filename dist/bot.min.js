var Bot=function(t){function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}var e={};return r.m=t,r.c=e,r.i=function(t){return t},r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},r.p="",r(r.s=9)}([function(t,r,e){"use strict";function n(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}}(),i=function(){function t(r,e,o){n(this,t),this.x=r,this.y=e,this.angle=o,this.bot=null,this.type=t.Type.Unknown}return o(t,[{key:"onRegister",value:function(t){this.bot=t}},{key:"log",value:function(t){console.log(this.type+": "+t)}},{key:"isForwardFacing",get:function(){return Math.abs(this.angle)<Math.PI/2}}]),t}();i.Type={Wheel:"Wheel",ObstructionSensor:"ObstructionSensor",Log:"Log",Unknown:"Unknown"},t.exports=i},function(t,r){function e(t,r){return function(e,n){e=0|+e,n=n||{};var o=!("scalars"in n)||n.scalars,i=!("vectors"in n)||n.vectors,s=o&&i,u=[];if(!o&&!i)throw new Error("Your function must accept either scalars or vectors");if(u.push("return function "+t+e+"(vec) {"),u.push("var i = arguments.length"),u.push("while (--i) {"),s&&u.push("if (Array.isArray(arguments[i])) {"),i)for(var c=0;c<e;c+=1)u.push("vec["+c+"] "+r+"= arguments[i]["+c+"]");if(s&&u.push("} else {"),o)for(var c=0;c<e;c+=1)u.push("vec["+c+"] "+r+"= arguments[i]");return s&&u.push("}"),u.push("}"),u.push("return vec"),u.push("}"),Function(u.join("\n"))()}}t.exports=e},function(t,r){(function(){var t,e,n,o,i,s,u,c,a,h=[].slice,l={}.hasOwnProperty,f=function(t,r){function e(){this.constructor=t}for(var n in r)l.call(r,n)&&(t[n]=r[n]);return e.prototype=r.prototype,t.prototype=new e,t.__super__=r.prototype,t};r.compose=function(t,r){var e;return e=r.copy(),e.rightComposeWith(t),e},t=function(){function t(){var t;t=1<=arguments.length?h.call(arguments,0):[],0===t.length?(this.m00=1,this.m01=0,this.m10=0,this.m11=1,this.v0=0,this.v1=0):1===t.length?(this.m00=t[0].m00,this.m01=t[0].m01,this.m10=t[0].m10,this.m11=t[0].m11,this.v0=t[0].v0,this.v1=t[0].v1):(this.m00=t[0],this.m01=t[1],this.m10=t[2],this.m11=t[3],this.v0=t[4],this.v1=t[5])}return t.prototype.oneLineSummary=function(){return"M = ["+this.m00.toPrecision(3)+" "+this.m01.toPrecision(3)+" "+this.m10.toPrecision(3)+" "+this.m11.toPrecision(3)+"]   V = ("+this.v0.toPrecision(3)+",  "+this.v1.toPrecision(3)+")   scale = "+this.getXScale().toPrecision(3)+" x "+this.getYScale().toPrecision(3)},t.prototype.copy=function(){return new t(this)},t.prototype.setCtxTransform=function(t){return t.setTransform(this.m00,this.m10,this.m01,this.m11,this.v0,this.v1)},t.prototype.applyToCtx=function(t){return t.transform(this.m00,this.m10,this.m01,this.m11,this.v0,this.v1)},t.prototype.transformPair=function(t,r){var e,n;return e=this.m00*t+this.m01*r+this.v0,n=this.m10*t+this.m11*r+this.v1,[e,n]},t.prototype.transformVec=function(t){var r,e;return r=this.m00*t[0]+this.m01*t[1]+this.v0,e=this.m10*t[0]+this.m11*t[1]+this.v1,t[0]=r,t[1]=e},t.prototype.rightComposeWith=function(t){var r,e,n,o,i,s;return n=t.m00*this.m10+t.m10*this.m11,o=t.m01*this.m10+t.m11*this.m11,s=t.v0*this.m10+t.v1*this.m11+this.v1,r=t.m00*this.m00+t.m10*this.m01,e=t.m01*this.m00+t.m11*this.m01,i=t.v0*this.m00+t.v1*this.m01+this.v0,this.m00=r,this.m01=e,this.m10=n,this.m11=o,this.v0=i,this.v1=s},t.prototype.leftComposeWith=function(t){var r,e,n,o,i,s;return n=this.m00*t.m10+this.m10*t.m11,o=this.m01*t.m10+this.m11*t.m11,s=this.v0*t.m10+this.v1*t.m11+t.v1,r=this.m00*t.m00+this.m10*t.m01,e=this.m01*t.m00+this.m11*t.m01,i=this.v0*t.m00+this.v1*t.m01+t.v0,this.m00=r,this.m01=e,this.m10=n,this.m11=o,this.v0=i,this.v1=s},t.prototype.deconstruct=function(){var t,r,e,n,o,i;return r=Math.sqrt(this.m00*this.m00+this.m10*this.m10),n=(this.m00*this.m11-this.m10*this.m01)/r,o=(this.m00*this.m01+this.m10*this.m11)/(this.m00*this.m11-this.m10*this.m01),t=Math.atan2(this.m10,this.m00),e=this.v0,i=this.v1,[r,n,o,t,e,i]},t.prototype.toPosRotScale=function(){var t;return t=Math.sqrt(this.m00*this.m00+this.m10*this.m10),{pos:[this.v0,this.v1],rot:Math.atan2(this.m10,this.m00),scale:[t,(this.m00*this.m11-this.m10*this.m01)/t]}},t.prototype.getXCenter=function(){return this.v0},t.prototype.getYCenter=function(){return this.v1},t.prototype.scale=function(t,r){return null==r&&(r=t),this.rightComposeWith(new c(t,r))},t.prototype.rotate=function(t){return this.rightComposeWith(new u(t))},t.prototype.translate=function(t,r){return this.rightComposeWith(new a(t,r))},t.prototype.flipX=function(){return this.rightComposeWith(new e)},t.prototype.flipY=function(){return this.rightComposeWith(new n)},t.prototype.reflect=function(t,r){return null!=r?this.rightComposeWith(new s(t,r)):this.rightComposeWith(new i(t))},t}(),u=function(t){function r(t){r.__super__.constructor.call(this,Math.cos(t),-Math.sin(t),Math.sin(t),Math.cos(t),0,0)}return f(r,t),r}(t),c=function(t){function r(t,e){r.__super__.constructor.call(this,t,0,0,e,0,0)}return f(r,t),r}(t),a=function(t){function r(t,e){r.__super__.constructor.call(this,1,0,0,1,t,e)}return f(r,t),r}(t),s=function(t){function r(t,e){r.__super__.constructor.call(this,2*t*t-1,2*t*e,2*t*e,2*e*e-1,0,0)}return f(r,t),r}(t),i=function(t){function r(t){r.__super__.constructor.call(this,Math.cos(t,Math.sin(t)))}return f(r,t),r}(s),e=function(t){function r(){r.__super__.constructor.call(this,-1,0,0,1,0,0)}return f(r,t),r}(t),n=function(t){function r(){r.__super__.constructor.call(this,1,0,0,-1,0,0)}return f(r,t),r}(t),o=function(t){function r(t){var e,n,o;e=t.pos,n=t.rot,o=t.scale,r.__super__.constructor.call(this),this.translate(e[0],e[1]),this.rotate(n),"number"==typeof o?this.scale(o):1===o.length?this.scale(o[0]):this.scale(o[0],o[1])}return f(r,t),r}(t),r.affine2d=t,r.rotation=u,r.scaling=c,r.translation=a,r.reflectionUnit=s,r.reflection=i,r.flipX=e,r.flipY=n,r.posRotScale=o}).call(this)},function(t,r,e){"use strict";function n(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}}(),i=e(0);t.exports=function(){function t(){n(this,t)}return o(t,[{key:"start",value:function(t){this.bot=t}},{key:"stop",value:function(){if(this.bot){var t=!0,r=!1,e=void 0;try{for(var n,o=this.bot.devices[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var s=n.value;s.type==i.Type.Wheel&&s.setSpeed(0)}}catch(t){r=!0,e=t}finally{try{!t&&o.return&&o.return()}finally{if(r)throw e}}this.bot=null}}},{key:"log",value:function(t){this.onLog&&this.onLog(t),console.log(t)}},{key:"name",get:function(){return"Null Controller"}}]),t}()},function(t,r,e){(function(){r.affine=e(2),r.polygon=e(8)}).call(this)},function(t,r,e){"use strict";t.exports.add=e(10)(2),t.exports.copy=e(11)(2),t.exports.cross=e(12)(2),t.exports.distance=e(13)(2),t.exports.divide=e(14)(2),t.exports.heading=e(15)(2),t.exports.limit=e(16)(2),t.exports.magnitude=e(17)(2),t.exports.multiply=e(18)(2),t.exports.normalize=e(19)(2),t.exports.subtract=e(20)(2),t.exports.rotate=function(t,r){return[t[0]*Math.cos(r)-t[1]*Math.sin(r),t[0]*Math.sin(r)+t[1]*Math.cos(r)]}},function(t,r,e){"use strict";function n(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function o(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?t:r}function i(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}var s=function(){function t(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}}(),u=e(3),c=e(0);t.exports=function(t){function r(){return n(this,r),o(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return i(r,t),s(r,[{key:"do",value:function(t){if("stop"==t){var r=!0,e=!1,n=void 0;try{for(var o,i=this.bot.devices[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var s=o.value;s.type==c.Type.Wheel&&s.setSpeed(0)}}catch(t){e=!0,n=t}finally{try{!r&&i.return&&i.return()}finally{if(e)throw n}}}else if("forward"==t){var u=!0,a=!1,h=void 0;try{for(var l,f=this.bot.devices[Symbol.iterator]();!(u=(l=f.next()).done);u=!0){var s=l.value;s.type==c.Type.Wheel&&(s.setSpeed(1),console.log("Setting device "+s.ID+" to speed 1"))}}catch(t){a=!0,h=t}finally{try{!u&&f.return&&f.return()}finally{if(a)throw h}}}else if("backward"==t){var p=!0,v=!1,y=void 0;try{for(var m,d=this.bot.devices[Symbol.iterator]();!(p=(m=d.next()).done);p=!0){var s=m.value;s.type==c.Type.Wheel&&s.setSpeed(-1)}}catch(t){v=!0,y=t}finally{try{!p&&d.return&&d.return()}finally{if(v)throw y}}}else if("left"==t){var b=!0,g=!1,w=void 0;try{for(var _,x=this.bot.devices[Symbol.iterator]();!(b=(_=x.next()).done);b=!0){var s=_.value;s.type==c.Type.Wheel&&s.setSpeed(s.x>0?1:-1)}}catch(t){g=!0,w=t}finally{try{!b&&x.return&&x.return()}finally{if(g)throw w}}}else if("right"==t){var S=!0,O=!1,k=void 0;try{for(var j,P=this.bot.devices[Symbol.iterator]();!(S=(j=P.next()).done);S=!0){var s=j.value;s.type==c.Type.Wheel&&s.setSpeed(s.x<0?1:-1)}}catch(t){O=!0,k=t}finally{try{!S&&P.return&&P.return()}finally{if(O)throw k}}}}},{key:"name",get:function(){return"Remote Control"}}]),r}(u)},function(t,r,e){"use strict";function n(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function o(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?t:r}function i(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}var s=function(){function t(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}}(),u=function t(r,e,n){null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,e);if(void 0===o){var i=Object.getPrototypeOf(r);return null===i?void 0:t(i,e,n)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(n)},c=e(3),a=e(0),h=function(t){function r(){n(this,r);var t=o(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return t.status=r.Status.Idle,t}return i(r,t),s(r,[{key:"start",value:function(t){u(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"start",this).call(this,t),this.timer=setInterval(this.loop.bind(this),100)}},{key:"stop",value:function(){u(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"stop",this).call(this),clearInterval(this.timer)}},{key:"loop",value:function(){if(this.log("Status: "+this.status+", obstruction: "+this.forwardObstructionAt),this.status==r.Status.Idle){if(this.isForwardObstructed)return;this.setForward()}else if(this.status==r.Status.Forward){if(!this.isForwardObstructed)return;this.setTurn()}else if(this.status==r.Status.Turning){if(this.isForwardObstructed)return;this.setForward()}}},{key:"setForward",value:function(){this.status=r.Status.Forward;var t=!0,e=!1,n=void 0;try{for(var o,i=this.bot.devices[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var s=o.value;s.type==a.Type.Wheel&&s.setSpeed(1)}}catch(t){e=!0,n=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw n}}}},{key:"setStop",value:function(){this.status=r.Status.Idle;var t=!0,e=!1,n=void 0;try{for(var o,i=this.bot.devices[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var s=o.value;s.type==a.Type.Wheel&&s.setSpeed(0)}}catch(t){e=!0,n=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw n}}}},{key:"setTurn",value:function(){this.status=r.Status.Turning;var t=!0,e=!1,n=void 0;try{for(var o,i=this.bot.devices[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var s=o.value;s.type==a.Type.Wheel&&s.setSpeed(s.x<0?-1:1)}}catch(t){e=!0,n=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw n}}}},{key:"name",get:function(){return"Smart Control"}},{key:"forwardObstructionAt",get:function(){var t=99999,r=!0,e=!1,n=void 0;try{for(var o,i=this.bot.devices[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var s=o.value;s.type==a.Type.ObstructionSensor&&(s.isForwardFacing&&(s.obstructionAt<=0||(console.log(s.obstructionAt),t>s.obstructionAt&&(t=s.obstructionAt))))}}catch(t){e=!0,n=t}finally{try{!r&&i.return&&i.return()}finally{if(e)throw n}}return t}},{key:"isForwardObstructed",get:function(){return this.forwardObstructionAt<.15}}]),r}(c);t.exports=h,h.Status={Idle:"Idle",Forward:"Forward",Turning:"Turning"}},function(t,r,e){(function(){var t;e(2),t=function(){function t(t){this.vertices=null!=t?t:[]}return t.prototype.copy=function(){var r,e,n,o,i;for(r=[],i=this.vertices,n=0,o=i.length;n<o;n++)e=i[n],r.push(e.copy());return new t(r)},t.prototype.addVertex=function(t){return this.vertices.push(t)},t.prototype.transform=function(t){var r,e,n,o,i;for(o=this.vertices,i=[],e=0,n=o.length;e<n;e++)r=o[e],i.push(t.transformVec(r));return i},t.prototype.getBoundingRectangle=function(){var t,r,e,n,o,i;for(e=null,i=this.vertices,t=n=0,o=i.length;n<o;t=++n)r=i[t],0===t?e=[[r[0],r[1]],[r[0],r[1]]]:(r[0]<e[0][0]&&(e[0][0]=r[0]),r[0]>e[1][0]&&(e[1][0]=r[0]),r[1]<e[0][1]&&(e[0][1]=r[1]),r[1]>e[1][1]&&(e[1][1]=r[1]));return e},t}(),r.polygon=t,r.factory={unitSquare:function(){return new t([[.5,.5],[-.5,.5],[-.5,-.5],[.5,-.5]])},unitCircleApprox:function(r){var e,n,o,i;for(n=2*Math.PI/r,o=0,e=new t,i=0;0<=r?i<r:i>r;0<=r?++i:--i)o+=n,e.addVertex([.5*Math.cos(o),.5*Math.sin(o)]);return e}}}).call(this)},function(t,r,e){"use strict";function n(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}}(),i=e(0),s=function(){function t(){n(this,t),this.devices=[],this._controller=null}return o(t,[{key:"registerDevice",value:function(t){this.devices.push(t),t.onRegister&&t.onRegister(this)}},{key:"log",value:function(t){console.log("GBot: "+t);var r=!0,e=!1,n=void 0;try{for(var o,s=this.devices[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;u.type==i.Type.Log&&u.log(t)}}catch(t){e=!0,n=t}finally{try{!r&&s.return&&s.return()}finally{if(e)throw n}}}},{key:"controller",get:function(){return this._controller},set:function(t){this._controller&&this._controller.stop(),this._controller=t,this._controller&&this._controller&&this._controller.start(this)}}]),t}();t.exports=s,t.exports.Device=i,t.exports.Vector2=e(5),t.exports.Affine=e(4).affine,t.exports.RemoteControl=e(6),t.exports.SmartControl=e(7)},function(t,r,e){t.exports=e(1)("add","+")},function(t,r){function e(t){return t.slice(0)}t.exports=function(){return e}},function(t,r){function e(t,r){return t[0]*r[1]-t[1]*r[0]}function n(t,r){return[t[1]*r[2]-t[2]*r[1],t[2]*r[0]-t[0]*r[2],t[0]*r[1]-t[1]*r[0]]}t.exports=function(t){if(2===(t=0|+t))return e;if(3===t)return n;throw new Error("cross product only supported for 2 and 3 dimensions")}},function(t,r){function e(t){t=0|+t;var r=[];r.push("return function dist"+t+"(vec, other) {");for(var e=[],n=0;n<t;n+=1)r.push("var p"+n+" = other["+n+"]-vec["+n+"]"),e.push("p"+n+"*p"+n);return r.push("return Math.sqrt("+e.join(" + ")+")"),r.push("}"),Function(r.join("\n"))()}t.exports=e},function(t,r,e){t.exports=e(1)("div","/")},function(t,r){function e(t){if(2!==(t=0|+t))throw new Error("`vectors.heading` only works in 2 dimensions");return function(t,r){return Math.atan2(t[1]-r[1],t[0]-r[0])}}t.exports=e},function(t,r){function e(t){t=0|+t;var r=[];r.push("return function limit"+t+"(vec, scalar) {");for(var e=[],n=0;n<t;n+=1)e.push("vec["+n+"] * vec["+n+"]");r.push("var mag = "+e.join("+")),r.push("if (mag > scalar*scalar) {"),r.push("mag = Math.sqrt(mag)");for(var n=0;n<t;n+=1)r.push("vec["+n+"] = vec["+n+"] * scalar / mag");return r.push("}"),r.push("return vec"),r.push("}"),Function(r.join("\n"))()}t.exports=e},function(t,r){function e(t){t=0|+t;var r=[];r.push("return function mag"+t+"(vec) {"),r.push("return Math.sqrt(");for(var e=[],n=0;n<t;n+=1)e.push("vec["+n+"]*vec["+n+"]");return r.push(e.join("+")),r.push(")"),r.push("}"),Function(r.join("\n"))()}t.exports=e},function(t,r,e){t.exports=e(1)("mult","*")},function(t,r){function e(t){t=0|+t;var r=[];r.push("return function normalize"+t+"(vec, scalar) {");for(var e=[],n=0;n<t;n+=1)e.push("vec["+n+"]*vec["+n+"]");r.push("var mag = Math.sqrt("+e.join("+")+")"),r.push("if (mag === 0) {");for(var n=0;n<t;n+=1)r.push("vec["+n+"] = 0");r.push("} else {");for(var n=0;n<t;n+=1)r.push("vec["+n+"] /= mag");return r.push("}"),r.push("return vec"),r.push("}"),Function(r.join("\n"))()}t.exports=e},function(t,r,e){t.exports=e(1)("sub","-")}]);